<p align="center">
    <img width="180" src="https://raw.githubusercontent.com/zhanyeye/Figure-bed/win-pic/img/20210602141834.png">
    <h2 align="center">DesSim</h2>
</p>

#### é¡¹ç›®ä»‹ç»ï¼š

ä¸€ä¸ªç®€å•çš„ç¦»æ•£äº‹ä»¶ä»¿çœŸç¨‹åºï¼Œèƒ½å¤ŸåŠ¨æ€çš„æ„å»ºæ¨¡å‹ï¼ŒåŸºäº [JaamSim](https://github.com/jaamsim/jaamsim) å¼€å‘
<details close>
 <summary>ğŸ‘‰ ç¦»æ•£äº‹ä»¶ä»¿çœŸä»‹ç» ğŸ‘ˆï¼ˆç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…~ï¼‰ </summary>
 <br/>

&ensp;&ensp;&ensp;åœ¨æ§åˆ¶é¢†åŸŸï¼Œé€šå¸¸å°†ç ”ç©¶å¯¹è±¡ç§°ä¹‹ä¸ºâ€œç³»ç»Ÿâ€ã€‚æ ¹æ®ç³»ç»ŸçŠ¶æ€æ˜¯å¦éšæ—¶é—´è¿ç»­å˜åŒ–ï¼Œåˆ†ä¸ºç¦»æ•£ç³»ç»Ÿå’Œè¿ç»­ç³»ç»Ÿã€‚ç¦»æ•£äº‹ä»¶ç³»ç»Ÿè¢«å¤§é‡çš„åº”ç”¨åœ¨ç”Ÿäº§è°ƒåº¦ï¼Œåº“å­˜ç®¡ç†å’Œç‰©æµåˆ¶é€ ç­‰é¢†åŸŸã€‚è¿™äº›åœºæ™¯çš„ä¸šåŠ¡æµç¨‹å¯ä»¥è¢«æè¿°ä¸ºä¸€ç³»åˆ—ç‹¬ç«‹çš„ç¦»æ•£äº‹ä»¶åºåˆ—ã€‚åœ¨ä¸¤ä¸ªç›¸é‚»çš„ç¦»æ•£äº‹ä»¶ä¹‹é—´ï¼Œç³»ç»ŸçŠ¶æ€æ˜¯ä¿æŒä¸å˜çš„ï¼Œå› æ­¤ç¦»æ•£ç³»ç»Ÿçš„å˜åŒ–éš¾ä»¥é‡‡ç”¨å¾®åˆ†æˆ–è€…å·®åˆ†æ–¹ç¨‹çš„å½¢å¼æè¿°ï¼Œè€Œä¸”è¿™äº›å˜åŒ–ä¸€èˆ¬ä¼šå…·æœ‰éšæœºæ€§ã€‚é’ˆå¯¹ç¦»æ•£ç³»ç»Ÿçš„è¿™äº›ç‰¹æ€§ï¼Œä¸€æ–¹é¢å¯ä»¥åŸºäºæ¦‚ç‡è®ºã€éšæœºè¿‡ç¨‹ç­‰åœ¨ç†è®ºä¸Šè¿›è¡Œåˆ†æï¼Œä½†æ˜¯éšç€ç³»ç»Ÿå¤æ‚ç¨‹åº¦çš„å¢åŠ ï¼Œè®¡ç®—æœºä»¿çœŸå·²ç»æˆä¸ºç ”ç©¶ç¦»æ•£ç³»ç»Ÿçš„é‡è¦æ‰‹æ®µã€‚

&ensp;&ensp;&ensp;ä¸ºäº†å¯¹ç³»ç»Ÿè¿›è¡Œå»ºæ¨¡ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç¦»æ•£äº‹ä»¶ç³»ç»Ÿçš„ä¸€äº›åŸºæœ¬è¦ç´ ï¼Œè¿™æœ‰åŠ©äºå¸®åŠ©æˆ‘ä»¬ç†è§£å®ä½“æ¨¡å‹å’Œäº‹ä»¶ä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠä»¿çœŸç­–ç•¥æ‰€é‡‡ç”¨çš„è§†è§’ï¼ˆä»¿çœŸç­–ç•¥ä¸»è¦æœ‰3ç§ï¼Œè¿™é‡Œä¸å†ä»‹ç»äº†ï¼‰ã€‚

1. å®ä½“ï¼šç”¨äºæè¿°ç³»ç»Ÿä¸­çš„å¯¹è±¡ã€‚å¯åˆ†ä¸ºä¸´æ—¶å®ä½“ï¼ˆç”±å¤–éƒ¨è¿›å…¥ç³»ç»Ÿçš„ï¼Œå®Œæˆç›¸åº”æ“ä½œåï¼Œæœ€ç»ˆç¦»å¼€ç³»ç»Ÿï¼‰å’Œæ°¸ä¹…å®ä½“ï¼ˆæ°¸ä¹…æ€§åœ°é©»ç•™åœ¨ç³»ç»Ÿä¸­ï¼‰ä¸¤å¤§ç±»ã€‚
1. äº‹ä»¶ï¼šå¼•èµ·ç³»ç»ŸçŠ¶æ€å˜åŒ–çš„è¡Œä¸ºã€‚ç¦»æ•£ç³»ç»Ÿç”±äº‹ä»¶é©±åŠ¨ï¼Œåœ¨ä»¿çœŸæ¨¡å‹ä¸­å»ºç«‹äº‹ä»¶è¡¨ç®¡ç†ç³»ç»Ÿä¸­çš„å„ç±»äº‹ä»¶ã€‚
1. æ´»åŠ¨ï¼šè¡¨ç¤ºç›¸é‚»ä¸¤ä¸ªäº‹ä»¶ä¹‹é—´çš„æŒç»­è¿‡ç¨‹ï¼Œå…¶å¼€å§‹å’Œç»“æŸéƒ½æ˜¯ç”±äº‹ä»¶å¼•èµ·çš„ã€‚
1. è¿›ç¨‹ï¼šè¿›ç¨‹ç”±è‹¥å¹²ä¸ªæœ‰åºäº‹ä»¶åŠè‹¥å¹²ä¸ªæœ‰åºæ´»åŠ¨ç»„æˆï¼Œä¸€ä¸ªè¿›ç¨‹æè¿°äº†å®ƒæ‰€åŒ…æ‹¬çš„äº‹ä»¶åŠæ´»åŠ¨ä¹‹é—´çš„é€»è¾‘å…³ç³»åŠæ—¶åºå…³ç³»ã€‚
1. ä»¿çœŸæ—¶é’Ÿï¼šç”¨äºæ¨¡æ‹Ÿå®é™…ç³»ç»Ÿçš„æ—¶é—´å±æ€§ï¼Œä¸€èˆ¬æ˜¯ä»¿çœŸçš„ä¸»è¦è‡ªå˜é‡ã€‚
1. ç»Ÿè®¡è®¡æ•°å™¨ï¼šç”¨äºç»Ÿè®¡ç³»ç»Ÿçš„çŠ¶æ€éšç€äº‹ä»¶çš„ä¸æ–­å‘ç”Ÿå˜åŒ–çš„æƒ…å†µã€‚

åœ¨å›é¡¾äº†ç¦»æ•£äº‹ä»¶çš„åŸºæœ¬æ¦‚å¿µä»¥åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ä»¿çœŸç¨‹åºçš„ä¸»è¦æˆåˆ†ï¼ŒDESSIMä¹Ÿå¯åˆ†ä¸ºä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ã€‚

1. [ä»¿çœŸæ—¶é’Ÿ](https://github.com/zhanyeye/DesSim/blob/3cda71270aa5fe55e5646d750f22dc06e0b38d03/src/main/java/cn/softeng/events/EventManager.java#L74-L78)ï¼šæä¾›ä»¿çœŸæ—¶é—´çš„å½“å‰å€¼ï¼›
1. [äº‹ä»¶è¡¨](https://github.com/zhanyeye/DesSim/blob/3cda71270aa5fe55e5646d750f22dc06e0b38d03/src/main/java/cn/softeng/events/EventManager.java#L43-L46)ï¼šç”±ç­–åˆ’å’Œäº‹ä»¶è°ƒåº¦ç”Ÿæˆçš„äº‹ä»¶åç§°ã€æ—¶é—´çš„äºŒç»´è¡¨ï¼Œå³æœ‰å…³æœªæ¥äº‹ä»¶çš„è¡¨ï¼›
1. [ç³»ç»Ÿçš„çŠ¶æ€å˜é‡](https://github.com/zhanyeye/DesSim/blob/3cda71270aa5fe55e5646d750f22dc06e0b38d03/src/main/java/cn/softeng/processflow/LinkedComponent.java#L31-L43)ï¼šæè¿°ç³»ç»ŸçŠ¶æ€çš„å˜é‡ï¼›
1. [åˆå§‹åŒ–å­ç¨‹åº](https://github.com/zhanyeye/DesSim/blob/master/src/main/java/cn/softeng/basicsim/InitModelTarget.java)ï¼šç”¨äºæ¨¡å‹åˆå§‹åŒ–ï¼›
1. äº‹ä»¶å­ç¨‹åºï¼šæ¯ä¸€ç±»äº‹ä»¶çš„å…·ä½“å®ç°ï¼›
1. [è°ƒåº¦å­ç¨‹åº](https://github.com/zhanyeye/DesSim/blob/3cda71270aa5fe55e5646d750f22dc06e0b38d03/src/main/java/cn/softeng/events/EventManager.java#L315-L458)ï¼šå°†æœªæ¥äº‹ä»¶æ’å…¥äº‹ä»¶è¡¨ä¸­çš„å­ç¨‹åºï¼›
1. [æ—¶é’Ÿæ¨è¿›å­ç¨‹åº](https://github.com/zhanyeye/DesSim/blob/3cda71270aa5fe55e5646d750f22dc06e0b38d03/src/main/java/cn/softeng/events/EventManager.java#L441-L445)ï¼šæ ¹æ®äº‹ä»¶è¡¨å†³å®šä¸‹æ¬¡ï¼ˆæœ€æ—©å‘ç”Ÿçš„ï¼‰äº‹ä»¶ï¼Œç„¶åå°†ä»¿çœŸæ—¶é’Ÿæ¨è¿›åˆ°äº‹ä»¶å‘ç”Ÿæ—¶åˆ»ï¼›
1. [ç»Ÿè®¡è®¡æ•°å™¨](https://github.com/zhanyeye/DesSim/blob/3cda71270aa5fe55e5646d750f22dc06e0b38d03/src/main/java/cn/softeng/basicsim/Entity.java#L281-L284)ï¼šç”¨æ¥å­˜æ”¾ä¸ç³»ç»Ÿæ€§èƒ½åˆ†ææœ‰å…³çš„ç»Ÿè®¡æ•°æ®çš„å„ä¸ªå˜é‡å€¼ï¼›
1. ä¸»ç¨‹åºï¼šè°ƒç”¨ä¸Šè¿°å„ç§å­ç¨‹åºå¹¶å®Œæˆä»¿çœŸä»»åŠ¡å…¨è¿‡ç¨‹ã€‚

 
</details>


æ”¯æŒçš„æ¨¡å‹ç»„ä»¶æœ‰ï¼š
- **EntityGenerator** : å®ä½“ç”Ÿæˆå™¨ï¼Œæ ¹æ®æŒ‡å®šæ—¶é—´é—´éš”ç”Ÿæˆå®ä½“ 
- **EntityLauncher** : å®ä½“å¯åŠ¨å™¨ï¼Œè¢«ç”¨æˆ·è§¦å‘åç”Ÿæˆå®ä½“ 
- **Queue** : é˜Ÿåˆ—ï¼Œç”¨äºå­˜æ”¾ç­‰å¾…ä¸­çš„å®ä½“
- **Server** : æœåŠ¡ï¼Œå»¶æ—¶ç»„ä»¶ï¼Œæ¨¡æ‹Ÿå¤„ç†å®ä½“æ‰€æ¶ˆè€—çš„æ—¶é—´
- **EntitySink** : å®ä½“å›æ”¶å™¨ï¼Œå›æ”¶å¤„ç†å®Œæ¯•çš„å®ä½“
- **Assign** : ä¸ºç»è¿‡çš„ä¸´æ—¶å®ä½“è®¾ç½®ä¸åŒçš„å±æ€§ï¼ŒæŒ‰ç…§ç”¨æˆ·è®¾ç½®çš„æƒé‡è¿›è¡Œåˆ†é…



#### DESSIM å®ç°åŸç†

##### 1.äº‹ä»¶è°ƒåº¦çš„ç­–ç•¥

DESSIM ä¸»è¦é‡‡ç”¨çš„æ¨¡æ‹Ÿç­–ç•¥æ˜¯ äº‹ä»¶è°ƒåº¦æ³•ï¼Œå®ƒä»äº‹ä»¶çš„è§†è§’å»æŠ½è±¡çœŸå®çš„ç³»ç»Ÿï¼Œäº‹ä»¶å‘ç”Ÿå¯èƒ½ä¼šå¯¼è‡´ç³»ç»ŸçŠ¶æ€å˜åŒ–ï¼Œä¹Ÿå¯èƒ½ä¼šè§¦å‘æ–°çš„æœªæ¥äº‹ä»¶ã€‚æ¯ä¸€ä¸ªäº‹ä»¶éƒ½ä¼šæœ‰å¯¹åº”çš„æ—¶é—´ç‚¹ï¼Œäº‹ä»¶è°ƒåº¦å™¨ä¼šæŒ‰ç…§æ—¶é—´é¡ºåºè°ƒåº¦äº‹ä»¶ï¼Œå¹¶æ¨è¿›ä»¿çœŸæ—¶é’Ÿã€‚æ•´ä¸ªè°ƒåº¦æµç¨‹å°±å¦‚ä¸‹å›¾æ‰€ç¤º

<p align="center">
    <img src="https://zhanyeye-img.oss-accelerate.aliyuncs.com/20210205144224.png">
</p>

1. é¦–å…ˆåˆå§‹åŒ–å­ç¨‹åºå°†åˆå§‹åŒ–äº‹ä»¶åŠ å…¥äº‹ä»¶è¡¨ï¼Œäº‹ä»¶è°ƒåº¦å™¨å¼€å§‹è¿è¡Œã€‚
1. äº‹ä»¶è°ƒåº¦å™¨ä»äº‹ä»¶è¡¨ä¸­å–å‡ºæœ€è¿‘å°†è¦å‘ç”Ÿçš„äº‹ä»¶ã€‚
1. äº‹ä»¶è°ƒåº¦å™¨ä¸ºè¯¥äº‹ä»¶åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œå¼€å§‹æ‰§è¡Œäº‹ä»¶ã€‚
1. è‹¥äº‹ä»¶æ‰§è¡Œè¿‡ç¨‹ä¸­è§¦å‘äº†æ–°çš„äº‹ä»¶ï¼Œåˆ™å°†è¯¥äº‹ä»¶æ·»åŠ åˆ°äº‹ä»¶è¡¨ä¸­çš„é€‚å½“ä½ç½®ã€‚
1. æ›´æ–°ç³»ç»ŸçŠ¶æ€å˜é‡ã€‚
1. å¦‚æœ‰éœ€è¦ï¼ˆäº‹ä»¶è°ƒåº¦å™¨çš„ä¸‹ä¸ªäº‹ä»¶äº‹ä»¶å¤§äºä»¿çœŸæ—¶é’Ÿæ—¶é—´ï¼‰ï¼Œæ¨è¿›ä»¿çœŸæ—¶é’Ÿ
1. å›åˆ°ç¬¬2æ­¥ï¼Œå†æ¬¡ä»äº‹ä»¶è¡¨ä¸­å–å‡ºæœ€è¿‘çš„äº‹ä»¶å¼€å§‹è°ƒåº¦
1. ä¸€ç›´å¾ªç¯è¾¾åˆ°ç›®æ ‡æ—¶é—´ æˆ– å› ä¸ºæŸäº›åŸå› äº‹ä»¶è¡¨ä¸ºç©ºæ‰ç»“æŸæ‰§è¡Œ

çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šå¯¹äº‹ä»¶è°ƒåº¦æœ‰ä¸€ä¸ªå¤§æ¦‚çš„äº†è§£ï¼Œä½†æ˜¯ä»ç„¶ä¼šæœ‰ä¸€äº›ç–‘é—®ã€‚æ•´ä¸ªä»¿çœŸéƒ½æ˜¯å›´ç»•ç€"äº‹ä»¶"è¿›è¡Œè°ƒåº¦ï¼Œé‚£"äº‹ä»¶"åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿåˆæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿè¿™é‡Œæˆ‘å…ˆæŒ‰ä¸‹ä¸è¡¨ã€‚ç­‰åˆ°åˆé€‚çš„æ—¶å€™å†å‘æ‚¨ä»‹ç»ã€‚

##### 2.å®ä½“æ¨¡å‹çš„å®ç°

åœ¨äº†è§£äº‹ä»¶è°ƒåº¦çš„åŸç†ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£ä»¿çœŸæ¨¡å‹çš„æ„å»ºã€‚ç›®å‰ DESSIM æä¾›äº†1ä¸ªé›¶æ—¶å®ä½“ï¼Œ5ä¸ªæ¨¡å‹ç»„ä»¶ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡åˆ›å»ºæ¨¡å‹çš„ç»„ä»¶å¯¹è±¡ï¼Œå¹¶è®¾ç½®å®ƒä»¬çš„å‰é©±ç»„ä»¶å’Œåç»§ç»„ä»¶ï¼Œæ¥æ„å»ºä¸€ä¸ªæµç¨‹æ¨¡å‹ã€‚å®ƒä»¬çš„æè¿°ä¿¡æ¯å¦‚ä¸‹ã€‚

| æ¨¡å‹ç»„ä»¶          | æè¿°                                                         |
| ----------------- | ------------------------------------------------------------ |
| `SimEntity`       | ä¸´æ—¶å®ä½“ï¼Œæ˜¯æµç»æ¨¡å‹ä¸­å„ç»„ä»¶çš„å¯¹è±¡ï¼Œå®ƒæ˜¯æ•´ä¸ªæ¨¡å‹ä¸­è¢«åŠ å·¥å¤„ç†çš„å¯¹è±¡ |
| `EntityGenerator` | è¯¥ç»„ä»¶è´Ÿè´£è‡ªåŠ¨åˆ›å»ºä¸€ç³»åˆ—çš„ä¸´æ—¶å®ä½“, å¹¶å°†è¿™äº›ä¸´æ—¶å®ä½“ä¼ é€’ç»™æµç¨‹ä¸­çš„ä¸‹ä¸€ä¸ªç»„ä»¶ã€‚ |
| `EntityLauncher`  | è¯¥ç»„ä»¶åœ¨ç”¨æˆ·è§¦å‘åï¼Œä¼šäº§ç”ŸæŒ‡å®šæ•°é‡çš„ä¸´æ—¶å®ä½“ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç»„ä»¶ |
| `Server`          | Server ç»„ä»¶æ¨¡æ‹ŸåŠ å·¥ä¼ å…¥çš„ä¸´æ—¶å®ä½“ï¼Œå®ƒä¼šå°†ä¸´æ—¶å®ä½“å»¶è¿Ÿä¸€æ®µæ—¶é—´åå†é‡Šæ”¾ç»™åç»§ç»„ä»¶ |
| `Queue`           | Queue ç»„ä»¶ç”¨äºå­˜æ”¾ç­‰å¾…è¢«æœåŠ¡çš„ä¸´æ—¶å®ä½“ï¼Œé€šå¸¸å’ŒServerç»„ä»¶é…åˆä½¿ç”¨ |
| `EntitySink`      | ç”¨äºå›æ”¶æˆ–é”€æ¯å°†è¦ç¦»å¼€ç³»ç»Ÿçš„ä¸´æ—¶å®ä½“                         |

é€šè¿‡ä¸Šé¢æ¨¡å‹ç»„ä»¶ä¹‹é—´çš„é“¾æ¥ï¼Œå°±å¯ä»¥æ„å»ºä¸€ä¸ªç®€å•çš„ç¦»æ•£äº‹ä»¶ä»¿çœŸæ¨¡å‹ï¼Œä¸‹é¢åˆ—ä¸¾äº†2ä¸ªä½¿ç”¨ç¤ºä¾‹ã€‚

- [Generatoræ¨¡å¼ç¤ºä¾‹](https://github.com/zhanyeye/DesSim/blob/master/README.md#generator%E6%A8%A1%E5%BC%8F%E7%A4%BA%E4%BE%8B)
- [Launcheræ¨¡å¼ç¤ºä¾‹](https://github.com/zhanyeye/DesSim/blob/master/README.md#launcher%E6%A8%A1%E5%BC%8F%E7%A4%BA%E4%BE%8B)

çœ‹å®Œä½¿ç”¨ç¤ºä¾‹ï¼Œä½ ä¼šå‘ç°è¿™äº›ç»„ä»¶å¯¹è±¡ç»„è£…æˆäº†ä¸€ä¸ªé“¾å¼ç»“æ„ ï¼Œä½ å¯èƒ½å¥½å¥‡è¿™äº›ç»„ä»¶æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿä¸´æ—¶å®ä½“åˆæ˜¯å¦‚ä½•åœ¨è¿™äº›æ¨¡å‹ç»„ä»¶ä¹‹é—´ä¼ é€’çš„å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä¼šé€šè¿‡ç±»å›¾å‘æ‚¨ä»‹ç»æ¨¡å‹å®ä½“/ç»„ä»¶çš„å®ç°ã€‚

<p align="center">
    <img width="850px" src="https://zhanyeye-img.oss-accelerate.aliyuncs.com/20210218123803.png">
</p>

**Entity**  
ä¸€ä¸ªæŠ½è±¡çš„åŸºç±»ã€‚å°è£…äº†ä»¿çœŸå®ä½“æˆ–ç»„ä»¶æ‰€éœ€è¦çš„åŸºæœ¬æ–¹æ³•å’Œæ•°æ®ã€‚æ¨¡å‹ä¸­çš„ä»¿çœŸå®ä½“æˆ–ç»„ä»¶éƒ½ç»§æ‰¿ä¸è¯¥åŸºç±»ã€‚

- `earlyInit()` è¯¥æ–¹æ³•ç”¨äºåˆå§‹åŒ–æ¨¡å‹ç»„ä»¶çš„åŸºæœ¬æ•°æ®ï¼Œæ¯ä¸€ç»„ä»¶éƒ½ä¼šé‡å†™è¯¥æ–¹æ³•ï¼Œæœ‰è‡ªå·±çš„å®ç°ã€‚
- `startUp()` è¯¥æ–¹æ³•æ˜¯åœ¨å®Œæˆåˆå§‹åŒ–åè°ƒç”¨ï¼Œç”¨äºå¯åŠ¨ç»„ä»¶å¼€å§‹è¿è¡Œï¼Œç”Ÿæˆä¸´æ—¶å®ä½“çš„ç»„ä»¶å®ç°è¯¥æ–¹æ³•ã€‚
- `getSimTicks()` ç”¨äºä»å½“å‰æ­£è¿è¡Œçº¿ç¨‹æ‰€æŒæœ‰çš„äº‹ä»¶ç®¡ç†å™¨è·å–ä»¿çœŸæ—¶é’Ÿã€‚
- `kill()` ç”¨äºé”€æ¯è¯¥å®ä½“ï¼Œå½“ä¸´æ—¶å®ä½“è¢«æ”¶é›†åä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚
- `updateStatistics()` å®šä¹‰äº†æ›´æ–°å®ä½“ç»Ÿè®¡æ•°æ®çš„æ¥å£ï¼Œæ¨¡å‹ä¸­å„ç»„ä»¶ä¼šæœ‰è‡ªå·±çš„å®ç°
- `scheduleProcess(long ticks, int priority, ProcessTarget t)` ï¼Œè¯¥æ–¹æ³•æ˜¯ç”¨äºå°†æ“ä½œå°è£…æˆç›¸åº”çš„äº‹ä»¶ï¼ŒåŠ å…¥äº‹ä»¶åˆ—è¡¨ä¸­ã€‚

**StateEntity** 
è¯¥ç±»ç»§æ‰¿è‡ªEntity, æ˜¯ä¸€ä¸ªä¸­é—´å±‚ï¼Œå®ƒåœ¨Entityçš„åŸºç¡€ä¸Šæ·»åŠ äº†å®ä½“çŠ¶æ€ï¼ŒæœåŠ¡æ—¶é—´ç­‰å±æ€§ï¼Œä¸»è¦è´Ÿè´£ç»Ÿè®¡å®ä½“çš„çŠ¶æ€å’ŒæœåŠ¡æ—¶é—´çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼šä¸´æ—¶å®ä½“åœ¨æ¨¡å‹ç»„ä»¶ä¹‹é—´ä¼ é€’æ—¶ï¼Œå…¶çŠ¶æ€å¯èƒ½ä¼šæ”¹å˜ï¼ŒæœåŠ¡æ—¶é—´ä¹Ÿä¼šä¸æ–­ç´¯åŠ ï¼Œéƒ½æ˜¯åœ¨è¿™ä¸€å±‚å®ç°çš„ã€‚

**SimEntity**  
ä¸´æ—¶å®ä½“ï¼Œç»§æ‰¿è‡ªEnityï¼Œè¯¥å®ä½“æ¨¡æ‹Ÿçš„æ˜¯åœ¨æµç¨‹æ¨¡å‹ä¸­è¢«ä¼ é€’çš„å¯¹è±¡ï¼Œå¯ä»¥ç”± `EntityGenerator` ï¼Œ `EntityLauncher`  ç­‰çš„å¯¹è±¡ç”Ÿæˆï¼Œä»–ä»¬ä¼šåœ¨æµç¨‹æ¨¡å‹å¯¹è±¡ä¹‹é—´ä¼ é€’ï¼Œæœ€åç¦»å¼€ç³»ç»Ÿã€‚è€Œä¸”å®ƒä»¬æ¯æ¬¡åˆ°è¾¾æ¨¡å‹ä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå°±å¯èƒ½ä¼šè§¦å‘ä¸€äº›å¯¹åº”çš„äº‹ä»¶ã€‚

**LinkedComponent**    
é“¾å¼ç»„ä»¶ï¼Œç»§æ‰¿è‡ªEntity, æ˜¯ä¸€ä¸ªä¸­é—´å±‚ï¼Œå®ƒä¸ºæ¨¡å‹ç»„ä»¶èµ‹äºˆè®¾ç½®å‰é©±å’Œåç»§ç»„ä»¶çš„èƒ½åŠ›ï¼Œæ¨¡å‹ä¸­æ‰€æœ‰å…·ä½“ç»„ä»¶éƒ½ç»§æ‰¿è‡ªè¯¥ç±»ï¼Œæ¥è·å¾—æ„å»ºé“¾å¼çš„æµç¨‹æ¨¡å‹çš„èƒ½åŠ›ï¼ŒåŒæ—¶å®ƒå¯ä»¥æ¥æ”¶ä¼ é€’ç©¿è¿‡æ¨¡å‹çš„é›¶æ—¶å®ä½“ã€‚

- è¯¥ç±»åŒ…å«ä¸€ä¸ªæŒ‡å‘åç»§ç»„ä»¶çš„nextComponentå­—æ®µã€‚è¿™æ ·å®ƒçš„å­ç±»ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªå…·ä½“çš„ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®åç»§ç»„ä»¶æ¥å®Œæˆæ¨¡å‹çš„æ„å»ºã€‚
- è¯¥ç±»åŒ…å« `receivedEntity` å­—æ®µï¼Œç”¨äºæš‚æ—¶å­˜å‚¨å‰é©±ç»„ä»¶ä¼ æ¥çš„ä¸´æ—¶å®ä½“ã€‚
- `sendToNextComponent(Entity entity)` æ–¹æ³•ç”¨äºå°†æ¥å—åˆ°çš„å®ä½“ä¼ é€’ç»™ä¸‹æ¸¸ç»„ä»¶ï¼Œå®ƒè°ƒç”¨ä¸‹æ¸¸ç»„ä»¶çš„ `addEntity()` ã€‚
- `addEntity(Entity ent)` æ–¹æ³•ï¼Œç”¨äºå‘è¯¥ç»„ä»¶ä¸­ä¼ é€’å®ä½“ã€‚
```java
public class LinkedComponent extends StateEntity {
    
    protected LinkedComponent nextComponent;
    private Entity receivedEntity;
    
    // å…¶ä»–å­—æ®µ
    
    /**
     * å°†æŒ‡å®šå®ä½“ä¼ é€ç»™æŒ‡å®šçš„ä¸‹æ¸¸ç»„ä»¶
     * @param entity
     */
    public void sendToNextComponent(Entity entity) {
        // è¯¥ç»„ä»¶å¤„ç†å®ä½“æ•°é‡+1
        numberProcessed++;
        // è·å–ä»¿çœŸæ—¶é’Ÿçš„æ—¶é—´
        releaseTime = this.getSimTime();
        if (nextComponent != null) {
            nextComponent.addEntity(entity);
        }
    }
    
    /**
     * ä»å‰é©±ç»„ä»¶ä¸­æ¥æ”¶æŒ‡å®šå®ä½“
     * @param ent
     */
    public void addEntity(Entity ent) {
        this.registerEntity(ent);
        receivedEntity = ent;
        numberAdded++;
    }
    
    // å…¶ä»–æ–¹æ³•
}
```

**EntitySink**  
ç»§æ‰¿è‡ªLinkedComponentï¼Œè¯¥æ¨¡å‹ç»„ä»¶ç”¨äºå›æ”¶å³å°†ç¦»å¼€ç³»ç»Ÿçš„ä¸´æ—¶å®ä½“ï¼Œå®ä½“è¿›å…¥è¯¥ç»„ä»¶åä¼šè¢«ç›´æ¥é”€æ¯ã€‚

- è¯¥ç»„ä»¶é‡å†™äº†addEntity()æ–¹æ³•, ä¼ é€’ç»™è¯¥ç»„ä»¶çš„ä¸´æ—¶å®ä½“éƒ½ä¼šè¢«é”€æ¯ã€‚
```java
public class EntitySink extends LinkedComponent {
    // å…¶ä»–å­—æ®µ ...
    @Override
    public void addEntity(Entity entity) {
        super.addEntity(entity);
        // å½“ nextComponentä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œåªç´¯åŠ  numberProcessed
        this.sendToNextComponent(entity);
        // ç»ˆæ­¢åŠ å…¥åˆ°è¯¥ç»„ä»¶çš„å®ä½“
        entity.kill();
    }
    // ...
} 
```

**Queue**  
é˜Ÿåˆ—ç»„ä»¶ï¼Œç”¨äºä¿å­˜ç­‰å¾…æœåŠ¡çš„ä¸´æ—¶å®ä½“ï¼Œé˜Ÿåˆ—ç»„ä»¶ä¸»è¦å’Œ Server ç»„ä»¶é…åˆä½¿ç”¨ï¼Œå½“ä¸€ä¸ªServerç»„ä»¶å¿™ç¢Œæ—¶ï¼Œåˆ°è¾¾çš„å®ä½“éƒ½ä¼šæš‚å­˜å† Queue ç»„ä»¶ä¸­ï¼Œå½“ Server ç»„ä»¶ç©ºé—²åï¼Œå®ƒä¼šä»é˜Ÿåˆ—ç»„ä»¶ä¸­å–å‡ºå®ä½“ç»§ç»­åŠ å·¥ã€‚

- è¯¥ç»„ä»¶ä¸­æœ‰ä¸€ä¸ªå®ä½“æœ‰åºé›†åˆ `itemSet` ï¼Œç”¨äºæš‚æ—¶å­˜æ”¾ç­‰å¾…æœåŠ¡çš„å®ä½“ã€‚
- è¯¥ç±»é‡å†™äº† `addEntity()`  æ¯å½“æœ‰å®ä½“åŠ å…¥åï¼Œä¼šå°†å®ä½“åŠ å…¥åˆ°ä¸€ä¸ªæœ‰åºé›†åˆä¸­ï¼Œå¹¶å‘é˜Ÿåˆ—çš„ç”¨æˆ·å‘é€é€šçŸ¥

**LinkedService**  
ç»§æ‰¿è‡ª LinkedComponent, è¯¥ç±»æ˜¯ä¸€ä¸ªä¸­é—´å±‚ï¼Œè¯¥å±‚ä¸»è¦ä½œç”¨æ˜¯å°è£…ç»„ä»¶çš„å®ä½“ç¦»å¼€äº‹ä»¶ï¼Œå¹¶å°†å…¶æ’å…¥äº‹ä»¶è¡¨ï¼Œç­‰å¾…è°ƒåº¦ã€‚ç”±è¿™äº›æœªæ¥äº‹ä»¶æ¥é©±åŠ¨ä¸´æ—¶å®ä½“åœ¨å„ä¸ªç»„ä»¶ä¹‹é—´ä¼ é€’ã€‚åŒæ—¶ä¹Ÿæä¾›äº†é’©å­å‡½æ•°ï¼Œè®©å­ç±»æ¥å®ç°å…·ä½“çš„å¤„ç†æ“ä½œã€‚

```java
public class LinkedService extends LinkedComponent implements QueueUser {
    // å…¶ä»–å­—æ®µ ...
    /**
     * ä¸ºè¯¥ç»„ä»¶æœåŠ¡çš„é˜Ÿåˆ—æœ‰æ–°å®ä½“åˆ°è¾¾
     * è¯¥æ–¹æ³•ä¼šç”±ä¸ºå®ƒæœåŠ¡çš„é˜Ÿåˆ—è°ƒç”¨
     */
    @Override
    public void queueChanged() {
        // è¯¥ç»„ä»¶å†æ¬¡å¤„ç†å®ä½“åˆ°è¾¾æ“ä½œ
        this.restartAction();
    }

    private void restartAction() {
        // åˆ¤æ–­è¯¥ç»„ä»¶å½“å‰æ˜¯å¦ç©ºé—²
        if (this.isIdle()) {
            // è¯¥æ“ä½œæ˜¯å¦ä¼šè¢«æš‚åœ
            if (processKilled) {
                processKilled = false;
                boolean bool = this.updateForStoppage(startTime, stopWorkTime, getSimTime());
                if (bool) {
                    this.setBusy(true);
                    this.setPresentState();
                    duration -= stopWorkTime - startTime;
                    startTime = this.getSimTime();
                    this.scheduleProcess(duration, 5, endActionTarget, endActionHandle);
                    return;
                }
            }
            // å¦åˆ™ï¼Œä¸ºè¿™ä¸ªæ–°çš„å®ä½“å¼€å§‹å·¥ä½œ
            this.startAction();
            return;
        }

        // å¦‚æœè¯¥æœåŠ¡ç»„ä»¶ä¸æ˜¯ç©ºé—²çš„è®°å½•ä¸‹å®ƒçš„çŠ¶æ€
        this.setPresentState();
    }

    /**
     * ç»„ä»¶å¼€å§‹å¤„ç†å®ä½“
     */
    protected final void startAction() {
        // æ‰§è¡ŒLinkedServiceå­ç±»çš„ç‰¹åˆ«å¤„ç†æ“ä½œ
        double simTime = this.getSimTime();
        if (!this.startProcessing(simTime)) {
            this.stopAction();
            return;
        }

        // è®¾ç½®çŠ¶æ€
        if (!isBusy()) {
            this.setBusy(true);
            this.setPresentState();
        }

        // è°ƒåº¦æœåŠ¡å®Œæˆ
        startTime = simTime;
        duration = this.getProcessingTime(simTime);
        // åˆæˆä¸€ä¸ªå®ä½“ç¦»å¼€äº‹ä»¶ï¼ŒåŠ å…¥äº‹ä»¶è¡¨
        this.scheduleProcess(duration, 5, endActionTarget, endActionHandle);
    }
    
    /**
     * å‘½ä»¤æ¨¡å¼ä¸­çš„ ConcreteCommand, ç”¨äºæ‰§è¡Œ LinkedService çš„ endAction()
     */
    private static class EndActionTarget extends EntityTarget<LinkedService> {
        EndActionTarget(LinkedService ent) {
            super(ent, "endAction");
        }

        @Override
        public void process() {
            entity.endAction();
        }
    }
    
    /**
     * å®Œæˆä¸€ä¸ªå®ä½“çš„å¤„ç†
     * (ç›¸å½“äºå‘½ä»¤æ¨¡å¼ä¸­çš„æ¥æ”¶è€…ï¼Œæ˜¯çœŸæ­£æ‰§è¡Œå‘½ä»¤æ“ä½œçš„åŠŸèƒ½ä»£ç )
     */
    final void endAction() {
        // æ‰§è¡Œæ­¤LinkedServiceå­ç±»æ‰€éœ€çš„ä»»ä½•ç‰¹æ®Šå¤„ç†
        this.endProcessing(this.getSimTime());
        // å¤„ç†ä¸‹ä¸€ä¸ªå®ä½“
        this.startAction();
    }
    
    // ...
    
}
```

**EntityGenerator**  
è¯¥ç±»ç»§æ‰¿è‡ª `LinkedServer` ï¼Œè¯¥ç»„ä»¶ç”¨äºè‡ªåŠ¨äº§ç”Ÿä¸´æ—¶å®ä½“ï¼Œå¯ä»¥è®¾ç½®äº§ç”Ÿé—´éš”ï¼Œäº§ç”Ÿçš„æ•°é‡ï¼Œå’Œç¬¬ä¸€æ¬¡äº§ç”Ÿçš„äº‹ä»¶ã€‚

- setEntitiesPerArrival()   è®¾ç½®æ¯æ¬¡è¾¾åˆ°å¤šå°‘å®ä½“
- setFirstArrivalTime()     è®¾ç½®ç¬¬ä¸€æ¬¡äº§ç”Ÿå®ä½“çš„æ—¶é—´
- setInterArrivalTime()     è®¾ç½®äº§ç”Ÿå®ä½“çš„é—´éš”æ—¶é—´
- è¯¥ç±»é‡å†™äº† endProcessing() æ–¹æ³•ï¼Œå®ç°äº†å®ä½“ç¦»å¼€çš„æ“ä½œ
```java
public class EntityGenerator extends LinkedService {
    
    // å…¶ä»–å­—æ®µ ...
    
    @Override
    protected void endProcessing(double simTime) {
        // è·å–åˆ›å»ºå®ä½“çš„æ•°é‡
        int num = (int) entitiesPerArrival;
        // åˆ›å»ºä¸´æ—¶å®ä½“ï¼Œå¹¶é€ç»™ä¸‹æ¸¸ç»„ä»¶
        for (int i = 0; i < num; i++) {
            numberGenerated++;
            Entity proto = prototypeEntity;
            StringBuilder sb = new StringBuilder();
            sb.append(this.getName()).append("_").append(numberGenerated);
            Entity entity = Entity.fastCopy(proto, sb.toString());
            entity.earlyInit();
            // å°†å®ä½“ä¼ é€ç»™é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ 
            this.sendToNextComponent(entity);
        }
    }
 
    // å…¶ä»–å­—æ®µ ...
}
```

**EntityLauncher**   
è¯¥ç±»ç»§æ‰¿è‡ª `LinkedServer` ï¼Œç”¨äºåœ¨ç”¨æˆ·è§¦å‘æ—¶ç”ŸæˆæŒ‡å®šæ•°é‡çš„ä¸´æ—¶å®ä½“ä¼ é€’ç»™ä¸‹æ¸¸ç»„ä»¶ã€‚äº§ç”Ÿå®ä½“çš„ç»†èŠ‚ä¸EntityGeneratorç›¸ä¼¼ï¼Œåªæ˜¯åœ¨è¢«è°ƒç”¨æ˜¯æ‰ä¼šè¢«æ‰§è¡Œï¼Œä¸”æ‰§è¡Œä¸€æ¬¡ã€‚

**Server**   
è¯¥ç±»ç»§æ‰¿è‡ª `LinkedServer` ï¼Œå®ƒç”¨äºæ¨¡æ‹Ÿä¸´æ—¶å®ä½“åœ¨ç»„ä»¶ä¸­åŠ å·¥ä¸€æ®µæ—¶é—´å†é‡Šæ”¾çš„è¿‡ç¨‹ï¼Œå®ƒå®ç°äº†LinkedServer ç±»çš„é’©å­å‡½æ•°ï¼Œæ¥å®ç°åŠ å·¥æŒ‡å®šæ—¶é—´åï¼Œå†å°†å®ä½“ä¼ é€’ä¸ªä¸‹æ¸¸ç»„ä»¶ã€‚

```java
public class Server extends LinkedService {
    
    // å…¶ä»–å­—æ®µ ...
    
    /**
     * å½“å®ä½“è¢«å¤„ç†æ—¶ï¼Œè°ƒç”¨çš„é’©å­å‡½æ•°ï¼Œserverç»„ä»¶ä¼šä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªä¸´æ—¶å®ä½“æ¥åŠ å·¥
     * @param simTime å½“å‰çš„ä»¿çœŸæ—¶é—´
     * @return
     */
    @Override
    protected boolean startProcessing(double simTime) {
        if (waitQueue.isEmpty()) {
            return false;
        }
        // ä»é˜Ÿåˆ—ä¸­åˆ é™¤ç¬¬ä¸€ä¸ªå®ä½“
        this.servedEntity = this.getNextEntityFromQueue();
        return true;
    }

    /**
     * å½“æ—¶å®ä½“å¤„ç†ç»“æŸæ—¶ï¼Œä¼šè°ƒç”¨çš„é’©å­å‡½æ•°ï¼Œserverä¼šå°†å®ä½“ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç»„ä»¶
     * @param simTime å½“å‰çš„ä»¿çœŸæ—¶é—´
     */
    @Override
    protected void endProcessing(double simTime) {
        // å°†å®ä½“å‘é€åˆ°é“¾ä¸­çš„ä¸‹ä¸€ä¸ªç»„ä»¶
        this.sendToNextComponent(servedEntity);
        servedEntity = null;
    }

    /**
     * è¿™æ˜¯ä¸€ä¸ªé’©å­å‡½æ•°ï¼Œè¿”å›è¯¥ç»„ä»¶åŠ å·¥å®ä½“æ¶ˆè€—çš„æ—¶é—´ï¼Œç”¨äºå®ä½“ç¦»å¼€æ—¶é—´çš„è®¡ç®—
     * @param simTime å½“å‰çš„ä»¿çœŸæ—¶é—´
     * @return
     */
    @Override
    protected double getProcessingTime(double simTime) {
        return serviceTime;
    }
    
    // å…¶ä»–å‡½æ•° ...
    
}
```

##### 3.å‘½ä»¤æ¨¡å¼çš„åº”ç”¨

æ•´ä¸ª DesSim éƒ½æ˜¯å›´ç»•ç€è¿™ä¸ªå‘½ä»¤æ¨¡å¼æ¥å®ç°çš„ã€‚å‘½ä»¤æ¨¡å¼çš„å…³é”®ä¹‹å¤„å°±æ˜¯æŠŠè¯·æ±‚å°è£…æˆä¸ºå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å‘½ä»¤å¯¹è±¡ï¼Œå¹¶å®šä¹‰äº†ç»Ÿä¸€çš„æ‰§è¡Œæ“ä½œçš„æ¥å£ï¼Œè¿™ä¸ªå‘½ä»¤å¯¹è±¡å¯ä»¥è¢«å­˜å‚¨ã€è½¬å‘ã€æ‰§è¡Œ ç­‰ï¼Œæ•´ä¸ªå‘½ä»¤æ¨¡å¼éƒ½æ˜¯å›´ç»•è¿™ä¸ªå¯¹è±¡åœ¨è¿›è¡Œï¼Œå®ƒçš„ç±»å›¾å¦‚ä¸‹:

<p align="center">
    <img width="700px" src="https://zhanyeye-img.oss-cn-shanghai.aliyuncs.com/20210207183606.png">
</p>

åœ¨"äº‹ä»¶è°ƒåº¦ç­–ç•¥"ä¸­ï¼Œæˆ‘ä»¬å‘ç°"äº‹ä»¶"åƒä¸€ä¸ªå¯¹è±¡ä¸€æ ·ï¼Œå¯ä»¥è¢«ä¼ é€’ï¼Œå¯ä»¥è¢«ä¿å­˜åœ¨é›†åˆä¸­å¹¶æ’åºï¼Œå³ä½¿è¿™ä¸ªäº‹ä»¶è¢«åˆ›å»ºå¾ˆä¹…äº†ï¼Œå®ƒä»ç„¶èƒ½å¤Ÿè¢«è°ƒåº¦æ‰§è¡Œã€‚å¯æ˜¯"äº‹ä»¶"æœ¬åº”è¯¥æ˜¯ä¸€äº›åˆ—æ“ä½œï¼Œå®ƒæ˜¯å¦‚ä½•åšåˆ°è¢«å­˜å‚¨ï¼Œæ’åºå’Œæ‰§è¡Œè°ƒåº¦çš„å‘¢ï¼Ÿ


åœ¨DESSIMä¸­ï¼Œäº‹ä»¶Eventä¸»è¦ç”± è°ƒåº¦æ—¶é—´ï¼Œäº‹ä»¶å¤„ç†å†…å®¹ï¼ˆå‘½ä»¤å¯¹è±¡ï¼‰å’Œä¸€ä¸ªäº‹ä»¶å¥æŸ„æ„æˆã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªäº‹ä»¶ä¼šåŒ…å«ä¸€ä¸ªå‘½ä»¤å¯¹è±¡ã€‚å‘½ä»¤å¯¹è±¡å°è£…äº†æ¥å—è€…å’Œæ¥å—è€…çš„åŠ¨ä½œï¼Œä»è€Œå°†è°ƒåº¦äº‹ä»¶çš„äº‹ä»¶ç®¡ç†å™¨å’ŒçœŸæ­£æ‰§è¡Œäº‹ä»¶çš„ç»„ä»¶å¯¹è±¡è§£è€¦ã€‚å½“éœ€è¦æ‰§è¡Œäº‹ä»¶çš„æ—¶å€™ï¼Œåªéœ€è¦è°ƒç”¨target.process()æ–¹æ³•å³å¯ï¼Œè¿™æ ·åŒ…å«ç€å‘½ä»¤å¯¹è±¡çš„äº‹ä»¶å¯¹è±¡å°±å¯ä»¥è¢«å­˜å‚¨ï¼Œè½¬å‘ï¼Œå’Œæ‰§è¡Œã€‚
```java
/**
 * @Description: äº‹ä»¶æŠ½è±¡ç±»
 */
public class Event {
    /**
     * äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´
     */
    long schedTick;
    /**
     * äº‹ä»¶å¤„ç†å†…å®¹ï¼ˆå‘½ä»¤å¯¹è±¡ï¼‰
     */
    ProcessTarget target;
    /**
     * æŒæœ‰ä¸€ä¸ªè¯¥äº‹ä»¶çš„å¼•ç”¨ï¼Œæ–¹ä¾¿åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­æ‰¾åˆ°å¯¹åº”çš„äº‹ä»¶
     */
    EventHandle handle;
    
    // .....
}

```


ProcessTarget ç±»å°±æ˜¯ä¸€ä¸ªå‘½ä»¤å¯¹è±¡ï¼Œåªå£°æ˜äº†å¯ä»¥æ‰§è¡Œçš„æ–¹æ³•æ¥å£ï¼Œå…·ä½“æ“ä½œéœ€è¦ç”±å…·ä½“å‘½ä»¤æ¥å®ç°ã€‚
```
public abstract class ProcessTarget {

    /**
     * åœæ­¢æ‰§è¡Œè¯¥target(å‘½ä»¤)
     */
    void kill() {}

    /**
     * æ‰§è¡Œtarget(å‘½ä»¤)å¯¹åº”çš„æ“ä½œ, å³eventæ‰§è¡Œçš„å†…å®¹
     */
    public abstract void process();

}
```


åŒæ ·çš„åœ¨"å®ä½“æ¨¡å‹å®ç°"ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå½“"ä¸´æ—¶å®ä½“"åœ¨æµç¨‹ç»„ä»¶ä¸­ä¼ é€’æ—¶ï¼Œä¼šè§¦å‘äº§ç”Ÿå¯¹åº”çš„äº‹ä»¶ï¼Œè¿™äº›ç»„ä»¶æ˜¯å¦‚ä½•äº§ç”Ÿäº‹ä»¶çš„å‘¢ï¼Ÿ


æˆ‘ä»¬ç”¨Queueç»„ä»¶æ¥ä¸¾ä¾‹å­ï¼šåœ¨ç»„ä»¶ä¸­åŒ…å«äº†ä¼šè¢«è§¦å‘çš„æ“ä½œï¼ˆç›¸å½“äºæ¥æ”¶è€…ï¼‰ï¼Œå®ƒæ˜¯äº‹ä»¶è¦æ‰§è¡Œçš„å†…å®¹ã€‚åœ¨ç»„ä»¶ç±»ä¸­ä¹Ÿå®šä¹‰äº†å…·ä½“å‘½ä»¤ï¼ˆå†…éƒ¨ç±»ï¼‰ï¼Œç”¨æ¥æŒæœ‰æŒæœ‰æ¥æ”¶è€…å¯¹è±¡ï¼Œå¹¶å°†è°ƒç”¨è¯·æ±‚å§”æ´¾ä¸ªè¿™ä¸ªæ¥æ”¶è€…ã€‚å…·ä½“å‘½ä»¤å¯¹è±¡çš„åˆ›å»ºä»¥åŠæ¥æ”¶è€…çš„è®¾ç½®ä¹Ÿæ˜¯åœ¨è¯¥ç±»ä¸­å®Œæˆçš„ã€‚å½“éœ€è¦è§¦å‘äº‹ä»¶æ—¶ï¼Œå°†è¿™ä¸ªå‘½ä»¤å¯¹è±¡å’Œè°ƒåº¦æ—¶é—´å°è£…æˆä¸ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œæ’å…¥äº‹ä»¶è¡¨çš„åˆé€‚ä½ç½®ã€‚å…·ä½“å¦‚ä¸‹ï¼š


1. æ¥å—è€…ï¼šå®ƒæ˜¯çœŸæ­£æ‰§è¡Œå‘½ä»¤çš„å¯¹è±¡ã€‚å½“é˜Ÿåˆ—å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå®ƒéœ€è¦é€šçŸ¥å®ƒçš„æ‰€æœ‰ç”¨æˆ·ï¼ŒQueueä¸­æœ‰å…·ä½“å®ç°ã€‚
```java
public class Queue extends LinkedComponent {
    ...
        
    /**
     * è¯¥Queueç»„ä»¶çš„ä½¿ç”¨è€…
     */
    private final ArrayList<QueueUser> userList;
    
    /**
     * å‘Šè¯‰æ¯ä¸€ä¸ªé˜Ÿåˆ—çš„ä½¿ç”¨è€…ï¼Œé˜Ÿåˆ—å‘ç”Ÿæ”¹å˜
     */
    public notifyQueueChanged() {
        for (QueueUser each : userList) {
            each.queueChanged();
        }
    }
    ...
}   
```


2. å…·ä½“å‘½ä»¤ï¼šé€šå¸¸ä¼šæŒæœ‰æ¥æ”¶è€…ï¼Œå¹¶è°ƒç”¨æ¥æ”¶è€…çš„åŠŸèƒ½æ¥å®Œæˆå‘½ä»¤è¦æ‰§è¡Œçš„æ“ä½œï¼Œè¿™é‡Œçš„ DoQueueChanged å…·ä½“å‘½ä»¤æŒæœ‰äº†æ¥å—è€…queueå¯¹è±¡ï¼Œå°†é€šçŸ¥å·¥ä½œå§”æ´¾ä¸ªæ¥å—è€…queueçš„notifyQueueChangedæ–¹æ³•ã€‚
```java
/**
 * é˜Ÿåˆ—å˜åŒ–é€šçŸ¥Target, ç”¨äºé€šçŸ¥Queueçš„ä½¿ç”¨è€…,Queueå‘ç”Ÿäº†æ”¹å˜
 * å‘½ä»¤æ¨¡å¼ä¸­å…·ä½“å‘½ä»¤çš„å®ç°
 */
private static class DoQueueChangedTarget extends ProcessTarget {
    /**
     * æŒæœ‰ç›¸åº”çš„æ¥æ”¶è€…å¯¹è±¡: è¢«é€šçŸ¥çš„Queueå®ä¾‹
     */
    private final Queue queue;

    /**
     * æ„é€ æ–¹æ³•ï¼Œä¼ å…¥ç›¸åº”çš„æ¥æ”¶è€…å¯¹è±¡
     * @param q è¢«é€šçŸ¥çš„Queueå®ä¾‹
     */
    public DoQueueChanged(Queue q) {
        queue = q;
    }

    @Override
    public void process() {
        // å‘Šè¯‰æ¯ä¸€ä¸ªé˜Ÿåˆ—çš„ä½¿ç”¨è€…ï¼Œé˜Ÿåˆ—å‘ç”Ÿæ”¹å˜
        queue.notifyQueueChanged()
    }

}
```


3. å®¢æˆ·ç«¯ï¼šåˆ›å»ºå…·ä½“çš„å‘½ä»¤å¯¹è±¡ï¼Œå¹¶ä¸”è®¾ç½®å‘½ä»¤å¯¹è±¡çš„æ¥æ”¶è€…ã€‚
```java
public class Queue extends LinkedComponent {
    // å…¶ä»–ä»£ç ...
    private final DoQueueChangedTarget userUpdate = new DoQueueChangedTarget(this);
    private final EventHandle userUpdateHandle = new EventHandle();
    // å…¶ä»–ä»£ç ...
}     
```


4. å°†å‘½ä»¤å¯¹è±¡å’Œè°ƒåº¦æ—¶é—´å°è£…æˆä¸€ä¸ªäº‹ä»¶ï¼Œäº¤ç»™äº‹ä»¶è°ƒåº¦å™¨ï¼Œæ’å…¥äº‹ä»¶è¡¨ã€‚
```java
public class Queue extends LinkedComponent {
    
    // å…¶ä»–ä»£ç ...
    
    /**
     * é˜Ÿåˆ—ç»„ä»¶æ¥å—åˆ°æ–°çš„å®ä½“
     * @param entity
     */
    @Override
    public void addEntity(Entity entity) {
        super.addEntity(entity);

        // å°†ä¸´æ—¶å®ä½“å°è£…æˆå®ä½“é¡¹
        QueueEntry entry = new QueueEntry(entity, getSimTime());

        // å°†å®ä½“é¡¹æ·»åŠ åˆ°é›†åˆä¸­
        itemSet.add(entry);

        // é€šçŸ¥è¯¥é˜Ÿåˆ—çš„æ‰€æœ‰ç”¨æˆ·
        if (!userUpdateHandle.isScheduled()) {
            // å°è£…ä¸€ä¸ª0æ—¶åˆ»åæ‰§è¡ŒuserUpdateTargetæ“ä½œçš„äº‹ä»¶ï¼Œäº¤ç»™äº‹ä»¶è°ƒåº¦å™¨ï¼Œæ’å…¥äº‹ä»¶è¡¨
            EventManager.scheduleSeconds(0, 2, false, userUpdateTarget, userUpdateHandle);
        }
    }
    
    // å…¶ä»–ä»£ç ...
    
}
```

#### DESSIM è¿è¡Œæµç¨‹

##### åˆå§‹åŒ–æ“ä½œ
å½“ç”¨æˆ·é€šè¿‡åˆ›å»ºå¯¹è±¡ï¼Œè®¾ç½®å¥½ç»„ä»¶ä¹‹é—´çš„é“¾æ¥å…³ç³»å’Œå‚æ•°ï¼Œæ„å»ºå¥½æ¨¡å‹åï¼Œä¼šè°ƒç”¨DesSim.initModel() è¿›è¡Œåˆå§‹æ“ä½œã€‚åˆå§‹åŒ–æ“åšé¦–å…ˆæ¸…ç©ºäº‹ä»¶ç®¡ç†å™¨ï¼Œå†å°è£…ä¸€ä¸ª 0 è¢«è°ƒåº¦çš„åˆå§‹åŒ–äº‹ä»¶ï¼Œå®ƒåŒ…å«ä¸€ä¸ªåˆå§‹åŒ–å‘½ä»¤å¯¹è±¡ï¼Œè¯¥äº‹ä»¶ä¼šè¢«åŠ å…¥åˆ°äº‹ä»¶è¡¨ä¸­ï¼Œåœ¨0æ—¶åˆ»è¢«è°ƒåº¦æ‰§è¡Œã€‚å¦‚æœæ˜¯Generatoræ¨¡å¼ï¼ŒDesSim.initModel() æ–¹æ³•è¿˜ä¼šæ¥å—ä¸€ä¸ªèµ·å§‹æ—¶é—´initTimeå‚æ•°ï¼Œåˆå§‹åŒ–åä»¿çœŸæ—¶é’Ÿè¢«æ¨è¿›åˆ° initTime æ—¶åˆ»ã€‚å¦‚æœæ˜¯Launcheræ¨¡å¼ï¼Œä»¿çœŸæ—¶é’Ÿä»ç•™åœ¨0æ—¶åˆ»ã€‚

åˆå§‹åŒ–äº‹ä»¶ä¸­çš„åˆå§‹åŒ–å‘½ä»¤å¯¹è±¡å¦‚ä¸‹ï¼Œå®ƒé¦–å…ˆä¼šè°ƒç”¨æ¨¡å‹ä¸­æ‰€æœ‰ç»„ä»¶çš„earlyInit()åˆå§‹åŒ–æ–¹æ³•å»ç»™æ¯ä¸ªç»„ä»¶è®¾ç½®é»˜è®¤å€¼ï¼Œç„¶åå†ä¼šå°†æ¯ä¸ªæ¨¡å‹å’Œå®ƒçš„ startUp() å¯åŠ¨æ–¹æ³•å°è£…æˆä¸€ä¸ªå…·ä½“çš„ StartUpTarget å¯åŠ¨å‘½ä»¤ã€‚å†å°è£…æˆå¯åŠ¨äº‹ä»¶ï¼ŒåŠ å…¥åˆ°äº‹ä»¶è¡¨ä¸­ç­‰å¾…æ‰§è¡Œã€‚


```java
/**
 * åˆå§‹åŒ–æ¨¡å‹çš„target,åœ¨æ¨¡å‹è¿è¡Œå‰,åˆå§‹åŒ–æ¨¡å‹ä¸­å„ä¸ªç»„ä»¶ï¼ˆå‘½ä»¤æ¨¡å¼ä¸­çš„ ConcreteCommandï¼‰
 * @date: 12/23/2020 12:18 PM
 */
@Slf4j
public class InitModelTarget extends ProcessTarget {

    @Override
    public void process() {
        // åˆå§‹åŒ–æ¯ä¸€ä¸ªå®ä½“
        for (Entity each : Entity.getClonesOfIterable(Entity.class)) {
            each.earlyInit();
        }

        // è°ƒç”¨æ¯ä¸€ä¸ªå®ä½“çš„å¯åŠ¨æ–¹æ³•
        long startTime = 0;
        for (Entity each : Entity.getClonesOfIterator(Entity.class)) {
            EventManager.scheduleTicks(startTime, 5, true, new StartUpTarget(each), null);
        }
    }

    @Override
    public String getDescription() {
        return "SimulationInit";
    }
}
```


##### å®ä½“çš„äº§ç”Ÿ
Generator æ¨¡å¼ä¸­ï¼ŒEntityGeneratorç»„ä»¶çš„ startUp() æ–¹æ³•è°ƒç”¨äº†startAction()ï¼Œå®ƒå°† â‘ ç”Ÿæˆä¸´æ—¶å®ä½“çš„æ“ä½œï¼Œâ‘¡å°†ä¸´æ—¶å®ä½“ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç»„ä»¶çš„æ“ä½œï¼Œâ‘¢é‡æ–°è°ƒç”¨startAction() æ–¹æ³•äº§ç”Ÿå®ä½“ ç­‰æ“ä½œå°è£…åˆ° endActionTarget å…·ä½“å‘½ä»¤å¯¹è±¡å½“ä¸­ï¼Œå†å°è£…æˆäº‹ä»¶ï¼Œæ’å…¥äº‹ä»¶è¡¨ä¸­ç­‰å¾…æ‰§è¡Œã€‚Launcher æ¨¡å¼ä¸­ï¼Œåªæœ‰è¢«è°ƒç”¨æ‰ä¼šå»å°è£…äº§ç”Ÿå®ä½“äº‹ä»¶ï¼Œäº‹ä»¶çš„å‘ç”Ÿæ—¶é—´ä¹Ÿæ˜¯ç”±ç”¨æˆ·æŒ‡å®šã€‚
```java
public class EntityGenerator extends LinkedService {
    
    // å…¶ä»–ä»£ç ...

    @Override
    public void startUp() {
        super.startUp();
        // Start generating entities
        this.startAction();
    }

    /**
     * ç»„ä»¶å¼€å§‹å¤„ç†å®ä½“
     */
    protected final void startAction() {
        // è·å–ä»¿çœŸæ—¶é—´
        double simTime = this.getSimTime();
        boolean bool = this.startProcessing(simTime);
        if (!bool) {
            this.stopAction();
            return;
        }

        // è®¾ç½®çŠ¶æ€
        if (!isBusy()) {
            this.setBusy(true);
            this.setPresentState();
        }

        // è°ƒåº¦æœåŠ¡å®Œæˆ
        startTime = simTime;
        duration = this.getProcessingTime(simTime);
        this.scheduleProcess(duration, 5, endActionTarget, endActionHandle);
    }


    @Override
    protected void endProcessing(double simTime) {
        // åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä½“
        int num = (int) entitiesPerArrival;
        for (int i = 0; i < num; i++) {
            numberGenerated++;
            Entity proto = prototypeEntity;
            StringBuilder sb = new StringBuilder();
            sb.append(this.getName()).append("_").append(numberGenerated);
            Entity entity = Entity.fastCopy(proto, sb.toString());
            entity.earlyInit();
            // å°†å®ä½“ä¼ é€ç»™é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ 
            this.sendToNextComponent(entity);

        }
    }
    // å…¶ä»–ä»£ç ...
}
```


##### å®ä½“åœ¨ç»„ä»¶ä¹‹é—´ä¼ é€’
ä¸´æ—¶å®ä½“ç”±Generatoræˆ–è€…Launcherç»„ä»¶äº§ç”Ÿåä¼šä¼ é€’ç»™ä¸‹æ¸¸ç»„ä»¶ï¼Œä¾‹å¦‚Serverç»„ä»¶æ¥æ”¶åˆ°å®ä½“åï¼Œä¼šåˆ¤æ–­å½“å‰æ˜¯å¦å¿™ç¢Œï¼Œè‹¥å¿™ç¢Œï¼Œåˆ™å°†å®ä½“æ”¾åˆ°ä¸ºå®ƒæœåŠ¡çš„é˜Ÿåˆ—ç»„ä»¶ä¸­ï¼Œå¾…ç©ºé—²æ—¶å†ä»é˜Ÿåˆ—ä¸­æ‹¿å®ä½“ï¼Œå¦åˆ™è¯ï¼Œå¼€å§‹æ¨¡æ‹Ÿå®ä½“åŠ å·¥è¿‡ç¨‹ï¼Œå®ƒä¼šå°†å®ä½“åŠ å·¥è¿‡ç¨‹çš„ä¸€äº›åŠ¨ä½œï¼ˆåŒ…æ‹¬æ›´æ–°ç³»ç»ŸçŠ¶æ€ï¼Œå°†å®ä½“ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç»„ä»¶ç­‰ï¼‰æ“ä½œå°è£…æˆä¸€ä¸ªå®ä½“ç¦»å¼€çš„æœªæ¥äº‹ä»¶ï¼ŒåŠ å…¥äº‹ä»¶è¡¨ä¸­ã€‚å½“æ—¶é—´è°ƒåº¦å™¨æ‰§è¡Œåˆ°è¯¥äº‹ä»¶æ—¶ï¼Œä¸´æ—¶å®ä½“ä¹Ÿä¼šå†æ¬¡ä¼ é€’ç»™åç»§ç»„ä»¶ï¼Œç›´åˆ°è¢«å›æ”¶ã€‚æ‰€ä»¥å®ä½“åœ¨ç»„ä»¶ä¹‹é—´çš„ä¼ é€’ï¼Œä¹Ÿæ˜¯é€šè¿‡äº‹ä»¶æ¥é©±åŠ¨çš„ã€‚ä¸€ç›´è¿™æ ·æ‰§è¡Œç›´åˆ°ä»¿çœŸåœæ­¢ã€‚è€Œåœ¨ä»¿çœŸæ—¶é’Ÿæ¨è¿›çš„è¿‡ç¨‹ä¸­ï¼Œå„ä¸ªç»„ä»¶ç´¯è®¡çš„ç»Ÿè®¡æ•°æ®å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„åˆ†æç»“æœã€‚


##### äº‹ä»¶çš„è°ƒåº¦ 
åœ¨DESSIMä¸­ï¼Œäº‹ä»¶ç®¡ç†å™¨EventManagerè´Ÿè´£äº‹ä»¶è°ƒåº¦ï¼Œä»¿çœŸæ—¶é’Ÿçš„æ¨è¿›ï¼Œäº‹ä»¶è¡¨çš„ç®¡ç†å’Œäº‹ä»¶çš„å°è£…ã€‚
äº‹ä»¶è°ƒåº¦åŠä»¿çœŸæ—¶é’Ÿçš„æ¨è¿›çš„åŸç†å¦‚ä¸‹é¢çš„ä¼ªä»£ç æ‰€ç¤ºï¼Œï¼ˆç”±äºç»†èŠ‚éå¸¸å¤æ‚ï¼Œåªèƒ½åœ¨è¿™ç®€å•ä»‹ç»äº†ï¼‰äº‹ä»¶è°ƒåº¦ä¼šåœ¨ä¸€ä¸ªwhileå¾ªç¯ä¸­åå¤æ‰§è¡Œï¼Œé¦–å…ˆè¯»å–é˜Ÿé¦–äº‹ä»¶ï¼Œè‹¥é˜Ÿé¦–äº‹ä»¶ä¸ºç©ºæˆ–ä»¿çœŸæ—¶é’Ÿå·²è¾¾åˆ°ç›®æ ‡æ—¶é—´ï¼Œåˆ™åœæ­¢æ‰§è¡Œã€‚è‹¥é˜Ÿé¦–äº‹ä»¶çš„è°ƒåº¦æ—¶é—´ç­‰äºå½“å‰ä»¿çœŸæ—¶é’Ÿçš„è¯ï¼Œå°±æ‰§è¡Œé˜Ÿé¦–äº‹ä»¶ï¼Œå¹¶å°†ä»¥æ‰§è¡Œäº‹ä»¶åˆ é™¤ã€‚è‹¥é˜Ÿé¦–äº‹ä»¶çš„è°ƒåº¦æ—¶é—´å¤§äºä»¿çœŸæ—¶é—´çš„è¯ï¼Œåˆ™æ¨è¿›ä»¿çœŸæ—¶é’Ÿ
```java
//äº‹ä»¶è°ƒåº¦åŸç†ä»‹ç»ä¼ªä»£ç 
while (true) {

    ä»æ—¶é—´è¡¨ä¸­è·å–é˜Ÿé¦–äº‹ä»¶ï¼›
    
    if (é˜Ÿé¦–äº‹ä»¶ä¸ºç©º || ä»¿çœŸæ—¶é’Ÿå·²ç»åˆ°è¾¾ç›®æ ‡æ—¶é—´) {
    	åœæ­¢æ‰§è¡Œï¼›
    }
    
    if (é˜Ÿé¦–äº‹ä»¶çš„è°ƒåº¦æ—¶é—´ == å½“å‰ä»¿çœŸæ—¶é’Ÿ) {
    	æ‰§è¡Œè¯¥é˜Ÿé¦–äº‹ä»¶ï¼›
        å°†è¯¥é˜Ÿé¦–äº‹ä»¶åˆ é™¤ï¼›
    }
    
    if (é˜Ÿé¦–äº‹ä»¶çš„è°ƒåº¦æ—¶é—´ > å½“å‰ä»¿çœŸæ—¶é’Ÿ) {
    	if (é˜Ÿé¦–äº‹ä»¶çš„æ—¶é—´ > ä»¿çœŸçš„ç›®æ ‡æ—¶é—´) ï½›
        	æ¨è¿›ä»¿çœŸæ—¶é’Ÿåˆ°ç›®æ ‡æ—¶é—´ï¼›
        ï½else {
        	æ¨è¿›ä»¿çœŸæ—¶é’Ÿåˆ°é˜Ÿé¦–äº‹ä»¶çš„è°ƒåº¦æ—¶é—´
        }
    }
    
}
```




è¿™é‡Œçš„äº‹ä»¶è¡¨æ˜¯ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œå®ƒå°†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶ä¼šæŒ‰ç…§è°ƒåº¦æ—¶é—´å’Œä¼˜å…ˆçº§è¿›è¡Œæ’åºã€‚è‹¥å‡ºç°äº†äº‹ä»¶çš„è°ƒåº¦æ—¶é—´ç›¸åŒçš„æƒ…å†µï¼Œåˆ™ä¼šæŒ‰ç…§äº‹ä»¶ä¼˜å…ˆçº§å±æ€§è¿›è¡Œæ’åºã€‚å…·ä½“å®ç°æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘ã€‚æ­¤å¤–ï¼ŒEventManager è¿˜å¯¹å¤–æä¾›äº†å°è£…äº‹ä»¶çš„æ–¹æ³•ï¼Œ ç”¨æˆ·è°ƒç”¨è¯¥æ–¹æ³•ä¼ å…¥æ‰§è¡Œæ“ä½œçš„çº¿ç¨‹ï¼Œç­‰å¾…æ—¶é—´ï¼Œå‘½ä»¤å¯¹è±¡ï¼Œä¼˜å…ˆçº§ï¼Œç­‰å‚æ•°ï¼Œå°±å¯ä»¥å°è£…ä¸€ä¸ªäº‹ä»¶ï¼Œå¹¶åŠ å…¥åˆ°äº‹ä»¶è¡¨çš„åˆé€‚ä½ç½®ã€‚
```java
public final class EventManager {
    // å…¶ä»–ä»£ç ...
    private void scheduleTicks(Process cur, long waitLength, int eventPriority, boolean fifo, ProcessTarget t, EventHandle handle) {
        assertCanSchedule();
        long schedTick = calculateEventTime(waitLength);
        EventNode node = getEventNode(schedTick, eventPriority);
        Event evt = getEvent(node, t, handle);

        if (handle != null) {
            if (handle.isScheduled()) {
                throw new ProcessError("Tried to schedule using an EventHandle already in use");
            }
            handle.event = evt;
        }
        if (trcListener != null) {
            disableSchedule();
            trcListener.traceSchedProcess(schedTick, eventPriority, t);
            enableSchedule();
        }
        node.addEvent(evt, fifo);
    }
    // å…¶ä»–ä»£ç ...
}
```

#### ä½¿ç”¨æŒ‡å—

ä½¿ç”¨çš„å‰å°†DesSimæ‰“åŒ…æˆjaråŒ…ï¼Œå¹¶åœ¨ä½ çš„é¡¹ç›®ä¸­å¼•ç”¨ã€‚[[å‚è€ƒ]](https://www.jianshu.com/p/257dcca702f7)

##### Generatoræ¨¡å¼ç¤ºä¾‹

```java
// ************************************************
// å®šä¹‰æ¨¡å‹, åŒæ—¶è®¾ç½®æ ‡è¯†ç¬¦ï¼Œ(å…ˆå®šä¹‰å‡ºæ‰€æœ‰ç»„ä»¶ï¼Œåœ¨ç»™ç»„ä»¶èµ‹å€¼)
// ************************************************

EntityGenerator generator = new EntityGenerator("EntityGenerator");
SimEntity simEntity = new SimEntity("DefaultEntity");
Queue queue1 = new Queue("Queue1");
Queue queue2 = new Queue("Queue2");
Server server1 = new Server("Server1");
Server server2 = new Server("Server2");
EntitySink sink = new EntitySink("EntitySink");

// ******************************
// ä¸ºæ¨¡å‹å±æ€§èµ‹å€¼
// ******************************

generator.setNextComponent(queue1);
generator.setEntitiesPerArrival(1);
generator.setFirstArrivalTime(7);
generator.setInterArrivalTime(7);
generator.setPrototypeEntity(simEntity);

server1.setWaitQueue(queue1);
server1.setServiceTime(5);
server1.setNextComponent(queue2);

server2.setWaitQueue(queue2);
server2.setServiceTime(5);
server2.setNextComponent(sink);

// ********************************
// è¿è¡Œæ¨¡å‹
// ********************************

// åˆå§‹åŒ–æ¨¡å‹ï¼ˆæ¨¡å‹ç±»åˆ«å’Œåˆå§‹åŒ–æ—¶é—´ï¼‰
DesSim.initModel(DesSim.Type.Generator, 0);

log.debug("hasEvent:{}", DesSim.hasEvent());
log.debug("minEventTime:{}", DesSim.nextEventTime());

// ä»¿çœŸæ—¶é’Ÿæ¨è¿›åˆ° 50æ—¶åˆ»
DesSim.resume(50);

log.debug("hasEvent:{}", DesSim.hasEvent());
log.debug("minEventTime:{}", DesSim.nextEventTime());

// *******************************
// è·å–ç»Ÿè®¡æ•°æ®
// *******************************

log.debug("{}", DesSim.getEntity("Server1").getClass());
log.debug("{}", DesSim.getTimePointList().toString());
log.debug("{}", DesSim.getDataList("Server1", DesSim.NumberAdded).toString());
log.debug("{}", DesSim.getDataList("Server1", DesSim.NumberProcessed).toString());
log.debug("{}", DesSim.getDataList("Server1", DesSim.NumberInProgress).toString());
```



##### Launcheræ¨¡å¼ç¤ºä¾‹

```java
// *************************************************
// å®šä¹‰æ¨¡å‹, åŒæ—¶è®¾ç½®æ ‡è¯†ç¬¦ï¼Œ(å…ˆå®šä¹‰å‡ºæ‰€æœ‰ç»„ä»¶ï¼Œåœ¨ç»™ç»„ä»¶èµ‹å€¼)
// *************************************************

EntityLauncher launcher = new EntityLauncher("launcher");
Queue queue1 = new Queue("queue1");
Queue queue2 = new Queue("queue2");
Server server1 = new Server("server1");
Server server2 = new Server("server2");
EntitySink sink = new EntitySink("sink");

// ******************************
// ä¸ºæ¨¡å‹å±æ€§èµ‹å€¼
// ******************************

launcher.setNextComponent(queue1);
server1.setWaitQueue(queue1);
server1.setServiceTime(5);
server1.setNextComponent(queue2);
server2.setWaitQueue(queue2);
server2.setServiceTime(5);
server2.setNextComponent(sink);


// ********************************
// è¿è¡Œæ¨¡å‹
// ********************************

DesSim.initModel(DesSim.Type.Launcher);

log.debug("hasEvent:{}", DesSim.hasEvent());
log.debug("nextEventTime:{}", DesSim.nextEventTime());
log.debug("currentTime:{}", DesSim.currentSimTime());

DesSim.inject(0, 1);

log.debug("hasEvent:{}", DesSim.hasEvent());
log.debug("nextEventTime:{}", DesSim.nextEventTime());
log.debug("currentTime: {}", DesSim.currentSimTime());

// ä»¿çœŸæ—¶é’Ÿæ¨è¿›åˆ° 7æ—¶åˆ»
DesSim.resume(7);

// 7æ—¶åˆ»æ³¨å…¥ä¸€ä¸ªå®ä½“
DesSim.inject(7,1);

// ä»¿çœŸæ—¶é’Ÿæ¨è¿›åˆ° 15æ—¶åˆ»
DesSim.resume(15);

// 15æ—¶åˆ»æ³¨å…¥ä¸€ä¸ªå®ä½“
DesSim.inject(15, 1);

// ä»¿çœŸæ—¶é’Ÿæ¨è¿›åˆ°30æ—¶åˆ»
DesSim.resume(30);

log.debug("{}", DesSim.hasEvent() ? "has Event" : "no Event");

// *******************************
// è·å–ç»Ÿè®¡æ•°æ®
// *******************************

// è¾“å‡ºæ—¶é’Ÿåºåˆ—
log.debug("Server:");
log.debug("{}", DesSim.getTimePointList().toString());
log.debug("{}",server1.getNumAddList().toString());
log.debug("{}",server1.getNumProcessedList().toString());
log.debug("{}", server1.getNumInProgressList().toString());
```
